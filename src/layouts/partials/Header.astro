---
import AnnouncementBar from "@/layouts/components/AnnouncementBar.astro";
import Logo from "@/layouts/components/Logo.astro";
import menu from "@/config/menu.json";
import ThemeSwitcher from "@/layouts/components/ThemeSwitcher.astro";
import Cart from "@/layouts/functional-components/cart/Cart.astro"; // ⬅️ Tu carrito original

// Header SIEMPRE traslúcido
const headerBgClass =
  "bg-white/10 dark:bg-black/20 backdrop-blur supports-[backdrop-filter]:backdrop-blur-md";
---

<!-- Barra verde compacta -->
<AnnouncementBar />

<header class={`sticky top-0 z-40 border-b border-border/60 dark:border-darkmode-border/60 ${headerBgClass}`}>
  <div class="container">
    <!-- Fila del header con altura fija: NO deja hueco arriba -->
    <div class="relative h-16 md:h-[72px]">
      <!-- IZQUIERDA: logo pegado arriba-izquierda (sin hueco) -->
        <a href="/" class="absolute inset-y-0 left-0 flex items-center">
          <div class="translate-y-[2px] md:translate-y-[3px]">
            <Logo />
          </div>
        </a>


      <!-- CENTRO: menú exactamente centrado -->
      <nav
        aria-label="Main navigation"
        class="hidden md:flex absolute inset-y-0 left-1/2 -translate-x-1/2 items-center z-10"
      >
        <ul class="flex items-center gap-x-10">
          {menu.main.map((item) => (
            <li><a href={item.url} class="header-link">{item.name}</a></li>
          ))}
        </ul>
      </nav>

      <!-- DERECHA: Tema -> Carrito (MISMAS piezas) -->
      <div class="absolute inset-y-0 right-0 flex items-center gap-4 z-40">
        <ThemeSwitcher />
        <Cart />  <!-- ⬅️ No se cambia: respeta Shopify/storefront -->
      </div>
    </div>
  </div>

  <!-- Nav móvil debajo -->
  <div class="md:hidden pb-3">
    <nav>
      <ul class="flex flex-wrap items-center justify-center gap-x-6 gap-y-2">
        {menu.main.map((item) => (
          <li><a href={item.url} class="header-link">{item.name}</a></li>
        ))}
      </ul>
    </nav>
  </div>
</header>
